# 序文

## node.jsとは何か？

- 非同期でイベント駆動のjavascriptランタイム
- javascriptのコードを読んで解釈するインタープリター
- javascriptのコードを読んで、そのコードを逐次実行していく
- V8 javascript エンジンを使うことで、webページだけではンク、サーバー上でアプリケーション全体を構築するのに使える
- javascriptアプリケーションが起動されると、全部のコードがメモリにロードされる
- すべてのコードブロックが即座に実行されなくても、そのアプリケーションで使えるようになる

## 本書の目的

- node.jsを通じてweb開発をお教えすること
  - 動的なページを作成する方法
  - データベース接続の方法
  - ユーザーのアクティビティをアプリケーションで保存する方法
  - アプリケーションの構築方法

---

# lesson 0

## node.jsを理解する

- javascriptはクライアントサイドのスクリプト言語から、データ管理のためのサーバーサイドプログラミング言語へシフト

### クライアントサイド/サーバーサイド

- クライアントサイド
  - ユーザーがwebブラウザで見るものを実装するコード
  - webページがロードされるときのユーザー経験を活性化するjavascriptが含まれる

- サーバーサイド
  - アプリケーションのロジックの組み立てに使われるコード
  - ユーザー認証、タスクの実行、クライアントサイドコードをクライアントに届けるなどの責任

### イベントループ

- 順番
  - タスクの実行
  - タスクをキューに入れる
  - ポーリングで順番を保ちながらキューを処理する
  - キューからのコールバックを実行する
  - 新たなコールバックはキューに入れる
- これの繰り返し

### スレッドとプロセス

- スレッド
  - 逐次実行する処理
  - 1つのタスクの実行に必要な計算能力と資源を、1つに束ねたもの
  - 処理の単位

- プロセス
  - 実行中のプログラム
  - プログラムを実行すると、1つのプロセスが起動される
  - リソースの割当と保護の単位

- 複数のnode.jsのランタイムを実行する：複数のプロセスで実行する
- node.jsがコードの処理をする：スレッドを実行する

## なぜnode.jsでの開発を学ぶのか

- 開発のコア言語としてjavascriptだけに注意を集中できる
- データの連続的なストリーミング、何らかのチャット機能が欲しい場合、他のプラットフォームよりも有利とみなされる
- GoogleのV8 javascriptインタープリターがあるので、広くサポートされ、性能と機能の向上に期待できる
- 具体的なjavascriptのスキルを持つ開発者は、仕事に就く機会が多く、フロントエンド開発にもバックエンド開発にも参加できる

---

# lesson 3

## モジュール

- `export` オブジェクトは、 `module` オブジェクトのプロパティ
  - `module` は、グローバルオブジェクトの1つ
  - `export` は、 `module.export` の略

- `require` を使ってライブラリ、モジュールをロードする
  - `require` は、グローバルオブジェクトの1つ
  - `require` は、 `module.require` の略

- Node.jsでは、 `CommonJS` を使っている
  - ブラウザの外でJavaScriptを実行するために、モジュールの使い方を定義する仕様

---

# lesson 4

- `http` モジュールはインターネットを介したり、リクエストを処理するNode.jsライブラリ

## Webサーバーを理解する

- webサーバー
  - インターネット越しの**リクエストに対して、データをロード/処理することによってレスポンスを返す**よう設計されたソフトウェア
- リクエストとレスポンス
  - ユーザーがどういう糸でアプリケーションと対話処理をしているのかを示すコンテクスト
- GET
  - クライアント：サーバーに情報をリクエストする
  - サーバー：ユーザーがブラウザで閲覧できるコンテンツによって対応する
- POST
  - クライアント：サーバーに情報を送る
  - サーバー：データをアプリケーションで処理をする

## アプリケーションのコード

- HTTPステータスコートの定数を提供するパッケージ
  - [http-status-codes](https://github.com/prettymuchbryce/http-status-codes)
- [npmドキュメントを日本語に翻訳下Liberty Technologyのページ](http://liberty-technology.biz/PublicItems/npm/npm.html)

- ポートの指定がなければ、OSがポートを選んでくれる

## node.jsにおけるコールバック

- コールバック
  - 無名関数の一種
  - 別の関数から呼び出すように設定できる
  - メリットは、もとの関数の処理が完了するのを待たずに、任意のコードを実行できる

- サーバーでのコールバックは、クライアントに応答するタイミングを示す
  - 複数のクライアントがサーバーに一連のリクエストを出すかもしれない
  - リクエストは、サーバーによって受信されると、それぞれ非同期に処理される
  - サーバーは、個々のリクエストを処理するのに時間を要する
      - 応答する準備ができたら、コールバックで、それを知らせる
  - レスポンスは、リクエストを受信した順序で返されるとは限らない
  - クライアントは、出したリクエストの処理時間に依存したタイミングで、そのレスポンスを受信する

---

# lesson 5

- `request` 自身がもつ特定のイベント
  - streamを見ると[Readable streamsでいくつか使えるイベント](https://nodejs.org/api/stream.html)がある

---

# lesson 6

- viewに必要なファイルは `fs` で読み込んでレスポンス時に返す

# lesson 7

## routerの設定の仕方
